<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />
        <link rel="stylesheet" type="text/css" href="css/style.css">
		<title>Super Meow: Team C</title>

	</head>

	<body background="assets/images/background.png" >

    <div class="container"><br><br>
<form name="login"">
<h2>Register Now!</h2>
    <label>Email</label><br>
    <input type="text" placeholder="Enter Email" id = "emailadd" name="emailadd" required><br>


    <label>Password</label><br>
    <input type="password" placeholder="Enter Password" id="psw" name="psw" required>

    <br><input type="checkbox" checked="checked"> Remember me
    <p style="font-size:10px">By creating an account you agree to our <a href="#">Terms &#38; Privacy</a>.</p>

      <input type="button" id="signUp" class="signupbtn"  value="Sign Up"/>
      <input type="button" class="cancelbtn" value="Go Back" style="color:#D2691E" onclick="location.href='index.html'"/>
  </div>
</form>

<script>
  // check if browser support indexedDB
  var indexedDBsupport = false;
  if("indexedDB" in window) {
      indexedDBsupport = true;
      console.log("IndexedDB supported...");
  } else {
      console.log("No support for IndexedDB...");
  }
  // Open the database for project, add events listeners
  if(indexedDBsupport) {
      var openDB = indexedDB.open("superMeow", 5);
      openDB.onupgradeneeded = function(e) {
          console.log("DB upgrade...");
          //local var for db upgrade, create first objectStore
          var upgradeDB = e.target.result;
          if (!upgradeDB.objectStoreNames.contains("superMeowos")) {
              upgradeDB.createObjectStore("superMeowos",{ autoIncrement:true });
              console.log("new object store created...")
          }
      }
      openDB.onsuccess = function(e) {
          console.log("DB success ...");
          db = e.target.result;
          //event handler for button
          $("#signUp").on("click", function(e){
              e.preventDefault();
              var emailadd = $("#emailadd").val();
              var psw = $("#psw").val();
              signUp(emailadd, psw);
          })

          //signUp function
              function signUp(email, psw) {
              //define user account info
              var userInfo = {
                  Email:email,
                  password:psw
              };
              // use transaction to bridge between app and database
              var dbTransaction = db.transaction(["superMeowos"], "readwrite");
              // use transaction to retrieve object store for data
              var dataStore = dbTransaction.objectStore("superMeowos");
              var addRequest = dataStore.add(userInfo);

              addRequest.onsuccess = function(e) {
                  console.log("data stored ...");
                  // do something
              }
              addRequest.onerror = function(e) {
                  console.log(e.target.error.name);
                  //handle error
                  alert("Database error: " + event.target.errorCode);
              }

          }

      }
      openDB.onerror = function(e) {
          console.log("DB error...");
          console.dir(e);
      }

  }
  // test support event


  function goback(form) {
      window.open('index.html')
  }
  function check(form) {
      if(form.emailadd.value === "email@gmail.com" && form.psw.value === "mypsw"){
          window.open('play.html');

      }
      else {
          alert('Error Password or Email entered')
      }
  }
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</body>
</html>
